var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(a,r,t)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,l=(e,a)=>{for(var r in a||(a={}))o.call(a,r)&&s(e,r,a[r]);if(t)for(var r of t(a))n.call(a,r)&&s(e,r,a[r]);return e},i=(e,t)=>a(e,r(t)),d=(e,a,r)=>new Promise((t,o)=>{var n=e=>{try{l(r.next(e))}catch(a){o(a)}},s=e=>{try{l(r.throw(e))}catch(a){o(a)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,s);l((r=r.apply(e,a)).next())});import{W as c,r as m,X as x,a0 as g,j as u,m as h,F as p,S as b,L as y}from"./index-BU-68qXD.js";import{P as f}from"./PasswordInput-p3ft-1b8.js";import{c as v,a as j,b as w}from"./index.esm-3cnm4FK5.js";const k=v().shape({name:j().matches(/^[A-Za-zÀ-ÿ' ]+$/,"Nome deve conter apenas letras").min(2,"Nome deve ter pelo menos 2 caracteres").required("Nome é obrigatório"),email:j().email("Email inválido").required("Email é obrigatório"),password:j().min(8,"Senha deve ter pelo menos 8 caracteres").matches(/[a-z]/,"Senha deve conter pelo menos uma letra minúscula").matches(/[A-Z]/,"Senha deve conter pelo menos uma letra maiúscula").matches(/[0-9]/,"Senha deve conter pelo menos um número").matches(/[^A-Za-z0-9]/,"Senha deve conter pelo menos um caractere especial").required("Senha é obrigatória"),confirmPassword:j().oneOf([w("password"),null],"Senhas não coincidem").required("Confirmação de senha é obrigatória"),school:j(),grade:j()}),N=()=>{const[e,a]=m.useState({name:"",email:"",password:"",confirmPassword:"",school:"",grade:""}),[r,t]=m.useState({}),[o,n]=m.useState(!1),[s,v]=m.useState(0),[j,w]=m.useState(""),{signUp:N}=x(),S=g(),E=e=>{const{name:o,value:n}=e.target;if(a(e=>i(l({},e),{[o]:n})),r[o]&&t(e=>i(l({},e),{[o]:""})),"password"===o){const e=P(n);v(e)}},P=e=>{let a=0;return e.length>=8&&(a+=1),/[a-z]/.test(e)&&(a+=1),/[A-Z]/.test(e)&&(a+=1),/[0-9]/.test(e)&&(a+=1),/[^A-Za-z0-9]/.test(e)&&(a+=1),Math.min(a,5)},C=()=>({text:["Muito fraca","Fraca","Média","Forte","Muito forte"][s-1]||"",color:["text-red-500","text-orange-500","text-yellow-500","text-blue-500","text-green-500"][s-1]||"text-gray-400"});return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-900 dark:to-gray-800 p-4",children:u.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full mb-4",children:u.jsx(p,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),u.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Crie sua conta"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Junte-se ao Descarte Certo e faça a diferença"})]}),u.jsxs(h.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},onSubmit:a=>d(void 0,null,function*(){var r,o;if(a.preventDefault(),console.log("Tentando cadastrar...",e),yield d(void 0,null,function*(){try{return yield k.validate(e,{abortEarly:!1}),t({}),!0}catch(a){const e={};return a.inner.forEach(a=>{e[a.path]=a.message}),t(e),!1}})){n(!0);try{const a={name:e.name.trim(),email:e.email.trim(),password:e.password,school:e.school.trim()||void 0,grade:e.grade.trim()||void 0},{data:r}=yield(e=>c.post("/auth/register",e))(a);if(r&&!r.error)return w("Cadastro realizado com sucesso! Verifique seu e-mail para confirmar a conta."),void setTimeout(()=>{S("/login")},2e3);t({general:"Erro ao criar conta. Tente novamente."})}catch(s){console.error("Erro no cadastro:",s),t({general:(null==(o=null==(r=null==s?void 0:s.response)?void 0:r.data)?void 0:o.error)||s.message||"Erro ao criar conta."})}finally{n(!1),console.log("Cadastro finalizado.")}}}),className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome completo *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:E,className:`\n                  w-full px-4 py-3 border rounded-lg transition-all duration-200\n                  focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\n                  ${r.name?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"}\n                `,placeholder:"Seu nome completo",disabled:o}),r.name&&u.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:r.name})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),u.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:E,className:`\n                  w-full px-4 py-3 border rounded-lg transition-all duration-200\n                  focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\n                  ${r.email?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"}\n                `,placeholder:"seu@email.com",disabled:o}),r.email&&u.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:r.email})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Senha *"}),u.jsx(f,{id:"password",name:"password",value:e.password,onChange:E,placeholder:"Sua senha",error:r.password,disabled:o}),e.password&&u.jsxs("div",{className:"mt-2",children:[u.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(e=>u.jsx("div",{className:`h-1 flex-1 rounded ${e<=s?C().color.replace("text-","bg-"):"bg-gray-200 dark:bg-gray-600"}`},e))}),u.jsx("p",{className:`text-xs mt-1 ${C().color}`,children:C().text})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirmar Senha *"}),u.jsx(f,{id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:E,placeholder:"Confirme sua senha",error:r.confirmPassword,disabled:o})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"school",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Escola (opcional)"}),u.jsx("input",{type:"text",id:"school",name:"school",value:e.school,onChange:E,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Nome da sua escola",disabled:o})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"grade",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Série (opcional)"}),u.jsxs("select",{id:"grade",name:"grade",value:e.grade,onChange:E,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:o,children:[u.jsx("option",{value:"",children:"Selecione sua série"}),u.jsx("option",{value:"1º ano",children:"1º ano"}),u.jsx("option",{value:"2º ano",children:"2º ano"}),u.jsx("option",{value:"3º ano",children:"3º ano"}),u.jsx("option",{value:"4º ano",children:"4º ano"}),u.jsx("option",{value:"5º ano",children:"5º ano"}),u.jsx("option",{value:"6º ano",children:"6º ano"}),u.jsx("option",{value:"7º ano",children:"7º ano"}),u.jsx("option",{value:"8º ano",children:"8º ano"}),u.jsx("option",{value:"9º ano",children:"9º ano"}),u.jsx("option",{value:"1º ano EM",children:"1º ano EM"}),u.jsx("option",{value:"2º ano EM",children:"2º ano EM"}),u.jsx("option",{value:"3º ano EM",children:"3º ano EM"}),u.jsx("option",{value:"Outro",children:"Outro"})]})]}),r.general&&u.jsx("div",{className:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 rounded-lg px-4 py-2 mb-4 text-center text-sm font-medium",children:r.general}),j&&u.jsx(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg mb-4",children:u.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:j})}),u.jsx(h.button,{type:"submit",disabled:o,className:`\n                w-full py-3 px-4 rounded-lg font-medium transition-all duration-200\n                ${o?"bg-gray-400 cursor-not-allowed":"bg-green-700 hover:bg-green-800 active:bg-green-900"}\n                text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\n              `,children:o?u.jsxs("span",{className:"flex items-center justify-center w-full",children:[u.jsx(b,{className:"animate-spin mr-2"})," Cadastrando..."]}):"Cadastrar"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500",children:"Ou continue com"})})]}),u.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Já tem uma conta?"," ",u.jsx(y,{to:"/login",className:"text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 font-medium transition-colors",children:"Faça login"})]})})]})]})})})};export{N as default};
