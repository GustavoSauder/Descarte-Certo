import{W as e,X as s,Y as t,Q as a,r as l,j as r,C as d,F as m,f as x,c as i,h as n,B as c,g as o,Z as g,_ as p}from"./index-BU-68qXD.js";function h(){var h,j,N,u,y;const{user:b}=s(),f=t(b),{addNotification:v}=a(),[k,w]=l.useState([]),[_,R]=l.useState([]),[C,S]=l.useState(!0);l.useEffect(()=>{!function(){return s=this,t=null,a=function*(){if(b){S(!0);try{const t=yield e.get("/disposals",{params:s});t.data&&w(t.data.slice(0,3));const a=yield p();a.data&&R(a.data.slice(0,3))}catch(t){console.error("Erro ao carregar dados do dashboard:",t),v({type:"error",title:"Erro",message:"Não foi possível carregar alguns dados do dashboard"})}finally{S(!1)}var s}},new Promise((e,l)=>{var r=e=>{try{m(a.next(e))}catch(s){l(s)}},d=e=>{try{m(a.throw(e))}catch(s){l(s)}},m=s=>s.done?e(s.value):Promise.resolve(s.value).then(r,d);m((a=a.apply(s,t)).next())});var s,t,a}()},[b,v]);const z=null!=(h=null==f?void 0:f.points)?h:0,D=null!=(j=null==f?void 0:f.ranking)?j:"N/A",P=null!=(N=null==f?void 0:f.total_disposals)?N:0,q=null!=(u=null==f?void 0:f.total_impact)?u:0;return r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 w-full",children:r.jsxs("div",{className:"w-full px-2 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-8",children:[r.jsxs("div",{className:"mb-6 sm:mb-8",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Meu Painel"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:"Acompanhe seu progresso e impacto ambiental"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[r.jsx(d,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 sm:p-3 bg-green-100 dark:bg-green-900 rounded-full",children:r.jsx(m,{className:"text-xl sm:text-2xl text-green-600 dark:text-green-400"})}),r.jsxs("div",{className:"ml-3 sm:ml-4",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Meus Pontos"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:z.toLocaleString()})]})]})}),r.jsx(d,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 dark:bg-yellow-900 rounded-full",children:r.jsx(x,{className:"text-xl sm:text-2xl text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{className:"ml-3 sm:ml-4",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Ranking"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:D})]})]})}),r.jsx(d,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 dark:bg-blue-900 rounded-full",children:r.jsx(i,{className:"text-xl sm:text-2xl text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{className:"ml-3 sm:ml-4",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Descarte Realizados"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:P})]})]})}),r.jsx(d,{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 dark:bg-purple-900 rounded-full",children:r.jsx(n,{className:"text-xl sm:text-2xl text-purple-600 dark:text-purple-400"})}),r.jsxs("div",{className:"ml-3 sm:ml-4",children:[r.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Impacto Total"}),r.jsxs("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:[q,"kg"]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[r.jsxs(d,{className:"p-4 sm:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Histórico de Descartes"}),r.jsx(c,{variant:"outline",size:"sm",children:"Ver Todos"})]}),r.jsx("div",{className:"space-y-3 sm:space-y-4",children:C?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Carregando..."})]}):k.length>0?k.map((e,s)=>r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 sm:p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2 sm:mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.material_type}),r.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[e.weight,"kg reciclado"]})]})]}),r.jsxs("div",{className:"text-right mt-2 sm:mt-0",children:[r.jsxs("p",{className:"text-green-600 font-semibold text-sm",children:["+",e.points_earned," pts"]}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]})]},e.id||s)):r.jsx("div",{className:"text-center py-4 text-gray-500",children:r.jsx("p",{children:"Nenhum descarte registrado ainda"})})})]}),r.jsxs(d,{className:"p-4 sm:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Loja de Recompensas"}),r.jsx(c,{variant:"outline",size:"sm",children:"Ver Todas"})]}),r.jsx("div",{className:"space-y-3 sm:space-y-4",children:C?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Carregando..."})]}):_.length>0?_.map((e,s)=>r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 sm:p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-800 rounded-lg mr-2 sm:mr-3",children:r.jsx(o,{className:"text-green-600 dark:text-green-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.title}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]}),r.jsxs("div",{className:"text-right mt-2 sm:mt-0",children:[r.jsxs("p",{className:"text-green-600 font-semibold text-sm",children:[e.points," pts"]}),r.jsx(c,{size:"sm",className:"mt-1",disabled:z<e.points,onClick:()=>{v({type:"info",title:"Resgate",message:"Redirecionando para a página de recompensas..."})},children:"Resgatar"})]})]},e.id||s)):r.jsx("div",{className:"text-center py-4 text-gray-500",children:r.jsx("p",{children:"Nenhuma recompensa disponível no momento"})})})]})]}),r.jsxs(d,{className:"mt-6 sm:mt-8 p-4 sm:p-6",children:[r.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white mb-4 sm:mb-6",children:"Conquistas Recentes"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(null==(y=null==f?void 0:f.recent_achievements)?void 0:y.length)>0?f.recent_achievements.map((e,s)=>r.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[r.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-full mr-3",children:r.jsx(g,{className:"text-yellow-600 dark:text-yellow-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.title}),r.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["+",e.points," pontos"]})]})]},e.id||s)):r.jsxs("div",{className:"col-span-full text-center py-8 text-gray-500",children:[r.jsx(x,{className:"text-4xl mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"Continue reciclando para desbloquear conquistas!"})]})})]})]})})}export{h as default};
