var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,r,t)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,l=(e,a)=>{for(var r in a||(a={}))s.call(a,r)&&i(e,r,a[r]);if(t)for(var r of t(a))n.call(a,r)&&i(e,r,a[r]);return e},o=(e,t)=>a(e,r(t));import{r as d,X as m,a0 as c,ad as x,P as g,j as u,m as p,F as h,L as b,S as y}from"./index-D8tqNdIF.js";import{P as f}from"./PasswordInput-DSNjNvnY.js";import{c as j,a as v}from"./index.esm-CtOYeTnu.js";const w=j().shape({email:v().email("Email inválido").required("Email é obrigatório"),password:v().required("Senha é obrigatória")}),N=()=>{var e,a;const[r,t]=d.useState({email:"",password:""}),[s,n]=d.useState({}),[i,j]=d.useState(!1),{signIn:v,isAuthenticated:N}=m(),k=c(),E=x(),{t:P}=g(),S=(null==(a=null==(e=E.state)?void 0:e.from)?void 0:a.pathname)||"/dashboard";d.useEffect(()=>{N&&k(S,{replace:!0})},[N,k,S]);const O=e=>{const{name:a,value:r}=e.target;t(e=>o(l({},e),{[a]:r})),s[a]&&n(e=>o(l({},e),{[a]:""}))};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-900 dark:to-gray-800 p-4",children:u.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8",children:[u.jsxs(p.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.2,duration:.5},className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full mb-4",children:u.jsx(h,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),u.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Bem-vindo de volta!"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-200",children:"Entre na sua conta para continuar"})]}),u.jsxs(p.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},onSubmit:e=>{return a=void 0,t=null,s=function*(){if(e.preventDefault(),(()=>{try{return w.validateSync(r,{abortEarly:!1}),n({}),!0}catch(e){const a={};return e.inner.forEach(e=>{a[e.path]=e.message}),n(a),!1}})()){j(!0);try{const{data:e,error:a}=yield v(r.email,r.password);a?n({general:a.message}):(null==e?void 0:e.user)?n({}):n({general:"Erro ao fazer login. Tente novamente."})}catch(a){n({general:(null==a?void 0:a.message)||"Erro ao fazer login."})}finally{j(!1)}}},new Promise((r,n)=>{var i=a=>{try{o(s.next(a))}catch(e){n(e)}},l=a=>{try{o(s.throw(a))}catch(e){n(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,l);o((s=s.apply(a,t)).next())});var a,t,s},className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),u.jsx("input",{type:"email",id:"email",name:"email",autoComplete:"email",value:r.email,onChange:O,className:`\n                  w-full px-4 py-3 border rounded-lg transition-all duration-200\n                  focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\n                  ${s.email?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"}\n                `,placeholder:"seu@email.com",disabled:i}),s.email&&u.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:s.email})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Senha"}),u.jsx(f,{id:"password",name:"password",value:r.password,onChange:O,placeholder:"Sua senha",error:s.password,disabled:i})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",id:"remember",name:"remember",className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),u.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Lembrar de mim"})]}),u.jsx(b,{to:"/esqueci-senha",className:"text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300 transition-colors",children:"Esqueceu a senha?"})]}),s.general&&u.jsx(p.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:u.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:s.general})}),u.jsx(p.button,{type:"submit",disabled:i,className:`\n                w-full py-3 px-4 rounded-lg font-medium transition-all duration-200\n                ${i?"bg-gray-400 cursor-not-allowed":"bg-green-700 hover:bg-green-800 active:bg-green-900"}\n                text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\n              `,children:i?u.jsxs("div",{className:"flex items-center justify-center",children:[u.jsx(y,{className:"animate-spin mr-2"}),"Entrando..."]}):"Entrar"})]}),u.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Não tem uma conta?"," ",u.jsx(b,{to:"/cadastro",className:"bg-green-700 hover:bg-green-800 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Cadastre-se"})]})})]})})})};export{N as default};
